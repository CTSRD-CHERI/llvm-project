; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: %cheri_llc %s -o - | FileCheck %s

define i32 @c1(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: c1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    slt $2, $1, $2
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = icmp slt i64 %1, %2
  %4 = zext i1 %3 to i32
  ret i32 %4
}

define i32 @c2(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: c2:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    xor $1, $1, $2
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    sltiu $2, $1, 1
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = icmp eq i64 %1, %2
  %4 = zext i1 %3 to i32
  ret i32 %4
}

define i32 @c3(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: c3:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    slt $2, $2, $1
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = icmp sgt i64 %1, %2
  %4 = zext i1 %3 to i32
  ret i32 %4
}

define i32 @c4(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: c4:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    slt $1, $1, $2
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    xori $2, $1, 1
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = icmp sge i64 %1, %2
  %4 = zext i1 %3 to i32
  ret i32 %4
}

define i32 @c5(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: c5:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    slt $1, $2, $1
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    xori $2, $1, 1
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = icmp sle i64 %1, %2
  %4 = zext i1 %3 to i32
  ret i32 %4
}

define i32 @ca1(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: ca1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    dsubu $1, $1, $2
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    sll $2, $1, 0
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = sub nsw i64 %1, %2
  %4 = trunc i64 %3 to i32
  ret i32 %4
}

define i32 @ca2(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: ca2:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    daddu $1, $2, $1
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    sll $2, $1, 0
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = add nsw i64 %2, %1
  %4 = trunc i64 %3 to i32
  ret i32 %4
}

define i32 @ca3(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: ca3:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    dmult $2, $1
; CHECK-NEXT:    mflo $1
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    sll $2, $1, 0
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = mul nsw i64 %2, %1
  %4 = trunc i64 %3 to i32
  ret i32 %4
}

define i32 @ca4(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: ca4:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $3, $c4, $ddc
; CHECK-NEXT:    ddiv $zero, $1, $3
; CHECK-NEXT:    mflo $1
; CHECK-NEXT:    sll $2, $1, 0
; CHECK-NEXT:    teq $3, $zero, 7
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    nop
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = sdiv i64 %1, %2
  %4 = trunc i64 %3 to i32
  ret i32 %4
}

define i32 @p1(ptr readnone %x, ptr readnone %y) #0 {
; CHECK-LABEL: p1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    slt $2, $4, $5
  %1 = icmp slt ptr %x, %y
  %2 = zext i1 %1 to i32
  ret i32 %2
}

define ptr addrspace(200) @castc(ptr addrspace(200) readnone %a) #0 {
; CHECK-LABEL: castc:
; CHECK:       # %bb.0:
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    nop
  ret ptr addrspace(200) %a
}

define ptr @castp(ptr addrspace(200) %a) #0 {
; CHECK-LABEL: castp:
; CHECK:       # %bb.0:
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    ctoptr $2, $c3, $ddc
  %1 = ptrtoint ptr addrspace(200) %a to i64
  %2 = inttoptr i64 %1 to ptr
  ret ptr %2
}

define i32 @cp(ptr addrspace(200) %x, ptr addrspace(200) %y) #0 {
; CHECK-LABEL: cp:
; CHECK:       # %bb.0:
; CHECK-NEXT:    ctoptr $1, $c3, $ddc
; CHECK-NEXT:    ctoptr $2, $c4, $ddc
; CHECK-NEXT:    dsubu $1, $1, $2
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    sll $2, $1, 0
  %1 = ptrtoint ptr addrspace(200) %x to i64
  %2 = ptrtoint ptr addrspace(200) %y to i64
  %3 = sub i64 %1, %2
  %4 = trunc i64 %3 to i32
  ret i32 %4
}

attributes #0 = { nounwind }
