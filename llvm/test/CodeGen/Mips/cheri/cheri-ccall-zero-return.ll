; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: %cheri_purecap_llc -frame-pointer=all %s -o - | %cheri_FileCheck %s

define chericcallcc ptr addrspace(200) @cgetdata(ptr addrspace(200) inreg readnone %c.coerce0, ptr addrspace(200) inreg nocapture readnone %c.coerce1) nounwind {
; CHECK-LABEL: cgetdata:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    cincoffset $c11, $c11, -32
; CHECK-NEXT:    csc $c24, $zero, 16($c11) # 16-byte Folded Spill
; CHECK-NEXT:    csc $c17, $zero, 0($c11) # 16-byte Folded Spill
; CHECK-NEXT:    cincoffset $c24, $c11, $zero
; CHECK-NEXT:    daddiu $2, $zero, 0
; CHECK-NEXT:    daddiu $3, $zero, 0
; CHECK-NEXT:    cmove $c3, $c1
; CHECK-NEXT:    cgetnull $c4
; CHECK-NEXT:    cincoffset $c11, $c24, $zero
; CHECK-NEXT:    clc $c17, $zero, 0($c11) # 16-byte Folded Reload
; CHECK-NEXT:    clc $c24, $zero, 16($c11) # 16-byte Folded Reload
; CHECK-NEXT:    cjr $c17
; CHECK-NEXT:    cincoffset $c11, $c11, 32
entry:
  ret ptr addrspace(200) %c.coerce0
}

define chericcallcc i32 @cgetnumber(ptr addrspace(200) inreg nocapture readnone %c.coerce0, ptr addrspace(200) inreg nocapture readnone %c.coerce1) nounwind {
; CHECK-LABEL: cgetnumber:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    cincoffset $c11, $c11, -32
; CHECK-NEXT:    csc $c24, $zero, 16($c11) # 16-byte Folded Spill
; CHECK-NEXT:    csc $c17, $zero, 0($c11) # 16-byte Folded Spill
; CHECK-NEXT:    cincoffset $c24, $c11, $zero
; CHECK-NEXT:    addiu $2, $zero, 42
; CHECK-NEXT:    daddiu $3, $zero, 0
; CHECK-NEXT:    cgetnull $c3
; CHECK-NEXT:    cgetnull $c4
; CHECK-NEXT:    cincoffset $c11, $c24, $zero
; CHECK-NEXT:    clc $c17, $zero, 0($c11) # 16-byte Folded Reload
; CHECK-NEXT:    clc $c24, $zero, 16($c11) # 16-byte Folded Reload
; CHECK-NEXT:    cjr $c17
; CHECK-NEXT:    cincoffset $c11, $c11, 32
; The real return value goes in $v0, check that $c3, $c4 and $v1 are zeroed:
entry:
  ret i32 42
}
